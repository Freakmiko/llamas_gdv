extends election_page

block countryImage
    img#headerCountryImage(src="/images/southKorea.svg")

block countryName
    div.headerMenuContent SÃ¼dkorea

block electionPhases
    div.headerMenuContent 1 Wahlrunde

block graph
    div#graph
        svg#linegraph
        script.
            var data = [];
            d3.json("/data/korea/ko/election_2017.json", function (error, d) {
                data = d3.merge([data, d.items])
                d3.json("/data/korea/ko/ahn_cheol-soo.json", function (error, d) {
                    data = d3.merge([data, d.items])
                    d3.json("/data/korea/ko/hong_jun-pyo.json", function (error, d) {
                        data = d3.merge([data, d.items])
                        d3.json("/data/korea/ko/moon_jae-in.json", function (error, d) {
                            data = d3.merge([data, d.items])
                            d3.json("/data/korea/ko/sim_sang-jung.json", function (error, d) {
                                data = d3.merge([data, d.items])
                                d3.json("/data/korea/ko/yoo_seung-min.json", function (error, d) {
                                    data = d3.merge([data, d.items])
                                    lineGraph.renderGraph(data)
                                })
                            })
                        })
                    })
                })
            })


block results	
    div#results
        div#barchart
        script.
            d3.json("/data/korea/en/candidate_percentages.json", function (error, d) {
                var currentDay = 0;
                var charts = [];
                for (var i = 0; i < d.length; i++) {
                    charts.push(new Barchart("barchart", i));
                }
                var currentDay = 0;
                d3.interval(function() {
                        charts.forEach(function(element, index) {
                            if (currentDay >= d[index].length)
                                element.renderGraph(d[index][currentDay - 1])
                            else
                                element.renderGraph(d[index][currentDay])
                        })
                        currentDay++;
                }, 50)
            });
//                var chart =  new Barchart("barchart", 0);
//                var chart2 =  new Barchart("barchart", 1);
//                var chart3 =  new Barchart("barchart", 2);
//                var chart4 =  new Barchart("barchart", 3);
//                var chart5 =  new Barchart("barchart", 4);
//                d3.interval(function (elapsed) {
//                    if (currentDay >= d[0].length) {
//                        chart.renderGraph(d[0][currentDay - 1]);
//                        chart2.renderGraph(d[1][currentDay - 1]);
//                        chart3.renderGraph(d[2][currentDay - 1]);
//                        chart4.renderGraph(d[3][currentDay - 1]);
//                        chart5.renderGraph(d[4][currentDay - 1]);
//                    } else {
//                        chart.renderGraph(d[0][currentDay]);
//                        chart2.renderGraph(d[1][currentDay]);
//                        chart3.renderGraph(d[2][currentDay]);
//                        chart4.renderGraph(d[3][currentDay]);
//                        chart5.renderGraph(d[4][currentDay]);
//                        currentDay++;
//                    }
//                }, 50);
//            });
//            var barData = [];
//            d3.json("/data/korea/en/ahn_cheol-soo.json", function (error, d) {
//                barData = d3.merge([barData, d.items])
//                d3.json("/data/korea/en/hong_jun-pyo.json", function (error, d) {
//                    barData = d3.merge([barData, d.items])
//                    d3.json("/data/korea/en/moon_jae-in.json", function (error, d) {
//                        barData = d3.merge([barData, d.items])
//                        d3.json("/data/korea/en/sim_sang-jung.json", function (error, d) {
//                            barData = d3.merge([barData, d.items])
//                            d3.json("/data/korea/en/yoo_seung-min.json", function (error, d) {
//                                barData = d3.merge([barData, d.items])
//                                var chart01 = new Barchart("barchart");
//                                chart01.renderGraph(barData, 0)
//                            })
//                        })
//                    })
//                })
//            })

